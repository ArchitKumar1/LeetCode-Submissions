{"id":397500609,"lang":"cpp","time":"1 year, 3 months","timestamp":1600442952,"status_display":"Runtime Error","runtime":"N/A","url":"/submissions/detail/397500609/","is_pending":"Not Pending","title":"Best Time to Buy and Sell Stock IV","memory":"N/A","code":"class Solution {\npublic:\n    int N,K;\n    vector<int> P;\n    vector<vector<int>> dp;\n    vector<pair<int,int>> ind;\n    int solve(int i,int k){\n        \n        if(i<0 || k==0) return 0;\n        if(dp[i][k]!=-1) return dp[i][k];\n        int &ans = dp[i][k] = 0;\n        \n        int id = ind[i].second;\n        int mi = ind[i].first;\n        if(id == -1) return 0;\n        mi = min(mi,P[i]);\n        if(mi <= P[i]){\n            ans = max(ans, P[i] - mi + solve(id-1,k-1));\n        }\n        ans = max(ans,solve(i-1,k));\n        return ans;\n    }\n    int maxProfit(int k, vector<int>& prices) {\n        N= prices.size(),K = min(N/2,k);\n        \n        dp = vector<vector<int>>(N+1,vector<int>(K+1,-1));\n        ind.resize(N);\n        \n        ind[0].first = -1;\n        ind[0].second = -1;\n        \n        P = prices;\n        int mi = P[0];\n        int id = 0;\n        \n        for(int i = 1;i<N;i++){\n            ind[i].first = mi;\n            ind[i].second = id;\n            if(P[i]<=mi){  \n                mi = P[i];\n                id = i;\n            }\n           // cout << ind[i].first << \" \" << ind[i].second << endl;\n        }\n        \n        \n        int ans = solve(N-1,K);\n        return ans==INT_MIN?0:ans;\n    }\n};","compare_result":"1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","title_slug":"best-time-to-buy-and-sell-stock-iv"}