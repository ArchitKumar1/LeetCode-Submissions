{"id":549978578,"lang":"cpp","time":"3 months, 2 weeks","timestamp":1630866160,"status_display":"Wrong Answer","runtime":"N/A","url":"/submissions/detail/549978578/","is_pending":"Not Pending","title":"GCD Sort of an Array","memory":"N/A","code":"#pragma GCC optimize(\"O3\")\n#pragma comment(linker, \"/stack:200000000\")\n#pragma GCC optimize(\"unroll-loops\")\nclass dsu {\n    public:\n    vector<int> par;\n    int n;\n    dsu(int _n) : n(_n) {\n        par.resize(n);\n        iota(par.begin(), par.end(), 0);\n    } \n    inline int get(int x) {\n        return (x == par[x] ? x : (par[x] = get(par[x])));\n    }\n    inline bool merge(int x, int y) {\n        x = get(x);\n        y = get(y);\n        if (x != y) {\n            par[x] = y;\n            return true;\n        }\n        return false;\n    }\n};\nclass Solution {\npublic:\n\n    bool gcdSort(vector<int>& nums) {\n        const int N = 5e4+1;\n        int n = nums.size();\n        unordered_map<int,int> m1;\n        for(int c : nums) m1[c]++;\n        dsu d(N);\n        vector<vector<int>> facts(N);\n        vector<vector<int>> G(N);\n        bool ans = true;\n        for(int i = 2;i < N;i++){\n            if(!m1[i])  continue;\n            facts[i].reserve((int)N/i);\n            for(int j = i;j < N;j+= i){\n                if(m1[j]) facts[i].push_back(j);\n            }\n        }\n        for(int i = 2;i < N;i++){\n            for(int j = 0;j+1<facts[i].size();j++){\n                d.merge(facts[i][j],facts[i][j+1]);\n            }\n        }\n        vector<int> snums = nums;\n        sort(snums.begin(),snums.end());\n        \n        for(int i = 0;i < n;i++){\n            int p = d.get(nums[i]);\n            // cout << i << \" \" << nums[i] << \" \"<< \" \"<< p << endl;\n            G[p].push_back(i);\n        }\n        \n        for(int i = 0;i < N;i++){\n            if(!G[i].size()) continue;\n            vector<int> curr;\n            vector<int> old;\n            for(int idx : G[i]) old.push_back(nums[idx]);\n            for(int idx : G[i]) curr.push_back(snums[idx]);\n            sort(old.begin(),old.end());\n            sort(curr.begin(),curr.end());\n//             for(int j = 0;j < old.size();j++){\n//                 cout << old[j] << \" \";\n//             }\n//             cout  << endl;\n            \n//             for(int j = 0;j < curr.size();j++){\n//                 cout << curr[j] << \" \";\n//             }\n            // cout  << endl;\n            if(old!=curr)ans= false;\n        }\n        return ans;\n    }\n};","compare_result":"11110111111110111101111111111101111111110111111111111111111010101010000010100000000000000","title_slug":"gcd-sort-of-an-array"}