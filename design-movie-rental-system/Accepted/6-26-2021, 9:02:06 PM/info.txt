{"id":513491348,"lang":"cpp","time":"6Â months","timestamp":1624721526,"status_display":"Accepted","runtime":"1008 ms","url":"/submissions/detail/513491348/","is_pending":"Not Pending","title":"Design Movie Rental System","memory":"395.1 MB","code":"\nclass MovieRentingSystem {\nstruct HASH{\n  size_t operator()(const pair<int,int>&x)const{\n    return hash<long long>()(((long long)x.first)^(((long long)x.second)<<32));\n  }\n};\npublic:\n    int n;\n    vector<set<pair<int,int>>> M;\n    set<vector<int>> R;\n    unordered_map<pair<int,int>,int,HASH>P;\n    MovieRentingSystem(int N, vector<vector<int>>& entries) {\n        n = N;\n        M.resize(10001);\n        P.reserve(1000000);\n        for(auto x : entries){\n            int s = x[0],m = x[1],p = x[2];\n            M[m].insert({p,s});\n            P[{m,s}] = p;\n        }\n    }\n    \n    vector<int> search(int movie) {\n        vector<int> res;\n        int cnt =  5;\n        for(auto x : M[movie]){\n            if(cnt == 0) break;\n            res.push_back(x.second);\n            cnt--;\n        }\n        return res;\n    }\n    \n    void rent(int shop, int movie) {\n        int price = P[{movie,shop}];\n        M[movie].erase(M[movie].find({price,shop}));\n        R.insert({price,shop,movie});\n    }\n    \n    void drop(int shop, int movie) {\n        int price = P[{movie,shop}];\n        M[movie].insert({price,shop});\n        R.erase({price,shop,movie});\n    }\n    \n    vector<vector<int>> report() {\n        vector<vector<int>> res;\n        int cnt =  5;\n        for(auto x : R){\n            if(cnt == 0) break;\n            res.push_back(vector<int>({x[1],x[2]}));\n            cnt--;\n        }\n        return res;\n    }\n};\n\n/**\n * Your MovieRentingSystem object will be instantiated and called as such:\n * MovieRentingSystem* obj = new MovieRentingSystem(n, entries);\n * vector<int> param_1 = obj->search(movie);\n * obj->rent(shop,movie);\n * obj->drop(shop,movie);\n * vector<vector<int>> param_4 = obj->report();\n */","compare_result":"1111111111111111111111111111111111111111111","title_slug":"design-movie-rental-system"}