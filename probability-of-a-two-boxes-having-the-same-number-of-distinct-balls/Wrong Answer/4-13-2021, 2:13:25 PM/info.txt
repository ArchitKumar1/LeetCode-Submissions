{"id":480064229,"lang":"cpp","time":"8 months, 2 weeks","timestamp":1618303405,"status_display":"Wrong Answer","runtime":"N/A","url":"/submissions/detail/480064229/","is_pending":"Not Pending","title":"Probability of a Two Boxes Having The Same Number of Distinct Balls","memory":"N/A","code":"template<class T> ostream& operator<<(ostream &os,vector<T> V){os<<\"[ \";for(auto v:V)os<<v<<\" \";return os<<\"]\";}\n\n#define trace(...) __f(#__VA_ARGS__,__VA_ARGS__)\ntemplate<typename Arg1>\nvoid __f(const char* name,Arg1&& arg1){cout<<name<<\" : \"<<arg1<<endl;}\ntemplate<typename Arg1,typename... Args>\nvoid __f(const char* names,Arg1&& arg1,Args&&... args){const char* comma=strchr(names+1,',');cout.write(names,comma-names)<<\" : \"<<arg1<<\" | \";__f(comma+1,args...);}\nclass Solution {\npublic:\n    \n    const int  fact[7]= {1,1,2,6,24,120,720};\n    map<vector<int>,int> m1;\n    double getProbability(vector<int>& nums) {\n        \n        double a = 0;\n        double b = 0;\n        \n        int n = nums.size();\n        \n        int total = 0;\n        for(int c : nums) total+= c;\n        \n        auto perm = [&](vector<int> v){\n            long long ans = 1;\n            int k = 1;            \n            for(int c : v ){\n                for(int i = 1;i<=c;i++){\n                    ans *= k++;\n                    ans /= i;\n                }\n            };\n            // trace(\"perm\",v,ans);\n            return ans;\n        };\n        auto dist = [&](vector<int> v){\n            return v.size() - count(v.begin(),v.end(),0);\n        };\n        auto get_other = [&](vector<int> v){\n            vector<int> other = nums;\n            for(int i = 0;i<nums.size();i++){\n                other[i]-= v[i];\n            }\n            return other;\n        };\n        \n        \n        auto check = [&](vector<int> v){\n            int c1 = dist(v);\n            vector<int> other = get_other(v);\n            \n            int c2 = dist(other);\n            return c1 == c2;\n        };\n        \n        function<void(int,vector<int>)> comp = [&](int pos,vector<int> v){\n            int sum = 0;\n            for(int c : v) sum+= c;\n                if(sum*2 > total) return;\n            if(pos == n){\n                int sum = 0;\n                for(int c : v) sum+= c;\n                if(sum*2 != total) return;\n                trace(\"sum match\",sum,total,v);\n                double p1 = m1[v];\n                double p2 = m1[get_other(v)];\n                trace(p1,p2);\n                b+= p1*p2;\n                if(check(v)) a += p1*p2;\n                // trace(a,b);\n                return;\n            }\n            \n            for(int i = 0;i<=nums[pos];i++){\n                v[pos] = i;\n                comp(pos+1,v);\n            }\n        };\n        \n        function<void(int,vector<int>,int,int)> calc_perms = [&](int pos,vector<int> v,int cnt,int sum){\n            trace(\"sum\",v,sum);\n            if(pos == n){\n                //trace(\"perm\",v,cnt);\n                m1[v] = cnt;\n                return;\n            }\n            cnt *= (sum+1);\n            for(int i = 0;i<=nums[pos];i++){\n                //trace(v,cnt,fact[i]);\n                cnt/= fact[i];\n                v[pos] = i;\n                calc_perms(pos+1,v,cnt,sum+i);\n                cnt*= fact[i];\n            }\n        };\n        calc_perms(0,vector<int>(n),1,0);\n        comp(0,vector<int>(n));\n        trace(a,b);\n        return (double)a/b;\n    }\n};","compare_result":"100000000000000000000","title_slug":"probability-of-a-two-boxes-having-the-same-number-of-distinct-balls"}